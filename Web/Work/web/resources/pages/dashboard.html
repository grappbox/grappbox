<!-- This file is subject to the terms and conditions defined in file "LICENSE.txt",
which is part of the GRAPPBOX source code package.
COPYRIGHT GRAPPBOX. ALL RIGHTS RESERVED. -->

<!-- grappbox.data : dashboard information -->
<div class="panel panel-default">
  <div class="panel-heading">Welcome to the GrappBox dashboard.</div>
  <div class="panel-body">
    <p>
      This dashboard presents you all you need to know about your current project.<br>Scroll down to see an overview of your team members' occupation. You'll also find your next meetings.
      <br>Use the <strong>menu on the left<strong> to navigate between all the GrappBox tools.
    </p>
  </div>
</div>

<!-- grappbox.data: team occupation -->
<section id="team-occupation">
  <div class="row">
    <div class="col-lg-12">
      <div class="row-header">
        <h4>Team occupation</h4>
        <p>
          Navigate between your teams members and see their availability.<br>When a team member is <strong>"Available"</strong>, you can choose tasks to assign to him. A <strong>"Busy"</strong> member cannot accept new tasks until its current task is complete.
        </p>
      </div>
      <div data-ng-if="occupation.onLoad">
        <div class="spinner data"><div></div></div>
      </div>
      <div data-ng-if="!occupation.onLoad">
        <div data-ng-if="occupation.valid && occupation.list">
          <div class="each-data col-md-3" data-ng-repeat="member in occupation.list">
            <div class="well">
              <ul>
                <li class="avatar" data-ng-if="!member.avatar">
                  <img data-ng-src="../resources/images/default-logo.min.png" height="120" width="120">
                </li>
                <li class="avatar centered" data-ng-if="member.avatar">
                  <img data-ng-src="data:image/png;base64,{[{ member.project_logo }]}" data-err-src="../resources/images/default-logo.min.png" height="120" width="120">
                </li>
                <li class="col-md-offset-1 ellipsis title">{[{ member.user.firstname }]} {[{ member.user.lastname }]}</li>
                <li class="col-md-offset-1"><i class="material-icons">info</i>Status: {[{ member.occupation == 'free' ? 'available' : 'busy' }]}</li>
                <li class="col-md-offset-1"><i class="material-icons">playlist_add_check</i>{[{ member.number_of_tasks_begun }]} started tasks</li>
                <li class="col-md-offset-1"><i class="material-icons">playlist_add</i>{[{ member.number_of_ongoing_tasks }]} remaining tasks</li>
              </ul>
              <a href="" title="Assign a task to {[{ member.user.firstname }]}" class="btn btn-success">Assign</a>
              <div class="clearfix"></div>
            </div>
          </div>
        </div>
        <div data-ng-if="occupation.valid && !occupation.list">
          <div class="well centered">
            <p><i class="material-icons">sentiment_satisfied</i><br>{[{ occupation.message }]}</p>
          </div>
        </div>
        <div data-ng-if="!occupation.valid">
          <div class="well centered">
            <p><i class="material-icons">clear</i><br>{[{ occupation.message }]}</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- grappbox.data: next meetings -->
<section id="next-meetings">
  <div class="row">
    <div class="col-lg-12">
      <div class="row-header">
        <h4>Next meetings</h4>
        <p>
          Hold to see all future appointments.<br>This list only shows the closest meetings. When one of your appointments is over or cancelled, it'll be automatically deleted from this list.
        </p>
      </div>
      <div data-ng-if="meetings.onLoad">
        <div class="spinner data"><div></div></div>
      </div>
      <div data-ng-if="!meetings.onLoad">
        <div data-ng-if="meetings.valid && meetings.list">
          <div class="each-data col-md-4" data-ng-repeat="meeting in meetings.list">
            <div class="well">
              <ul>
                <li class="ellipsis title">"{[{ meeting.title }]}"</li>
                <li><i class="material-icons">info</i>Meeting type: {[{ meeting.type }]}</li>
                <li><i class="material-icons">alarm_on</i>Begin: {[{ formatObjectDate(meeting.begin_date.date) }]}</li>
                <li><i class="material-icons">alarm_off</i>End: {[{ formatObjectDate(meeting.end_date.date) }]}</li>
                <li class="ellipsis"><i class="material-icons">date_range</i>"{[{ meeting.description }]}"</li>
              </ul>
              <a href="" title="Open this event in GrappBox calendar" class="btn btn-default">Open</a>
              <div class="clearfix"></div>
            </div>
          </div>
        </div>
        <div data-ng-if="meetings.valid && !meetings.list">
          <div class="well centered">
            <p><i class="material-icons">sentiment_satisfied</i><br>{[{ meetings.message }]}</p>
          </div>
        </div>
        <div data-ng-if="!meetings.valid">
          <div class="well centered">
            <p><i class="material-icons">clear</i><br>{[{ meetings.message }]}</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>