<!-- This file is subject to the terms and conditions defined   in file 'LICENSE.txt',
which is part of the GRAPPBOX source code package.
COPYRIGHT GRAPPBOX. ALL RIGHTS RESERVED. -->

<!-- Whiteboards -->
<section class="whiteboard-list">
  <div class="page-header big {[{ ::path.colors[path.current] + '-background' }]}">
    <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12 no-padding text-center">
      <img src="../resources/img/app/whiteboard.svg" width="300" height="auto" alt="Whiteboards">
    </div>
    <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12 no-padding title">
      <h1>Whiteboards</h1>
      <p>Welcome to your project's whiteboards management page.<br>Each whiteboard is collaborative, which means that it's <strong>shared in real-time</strong> between all GrappBox platforms.</p>
      <a href="" class="btn btn-raised {[{ ::path.colors[path.current] + '-color' }]}" data-ng-click="whiteboards.add()" title="Start a new whiteboard for this project">Create a new whiteboard</a>
    </div>
    <div class="clearfix"></div>
  </div>

  <div data-ng-if="!view.loaded">
    <div class="spinner section">
      <svg class="circular" viewBox="25 25 50 50"><circle class="path" cx="50" cy="50" r="20" fill="none" stroke-width="2" stroke-miterlimit="10"></circle></svg>
    </div>
  </div>
  <div data-ng-if="view.loaded">
    <div data-ng-if="view.valid && view.authorized">
      <div class="box-row">
        <div data-ng-if="whiteboards.list" class="col-lg-4 col-md-6 col-sm-12 col-xs-12 no-padding each-whiteboard" data-ng-repeat="whiteboard in whiteboards.list">
          <div class="box">
            <div class="avatar">
              <img data-ng-src="https://static.grappbox.com/app/user/{[{ ::whiteboard.user.id }]}" data-ng-error="../resources/img/app/default-avatar.min.png" height="48" width="48" alt="{[{ ::whiteboard.user.firstname }]} {[{ ::whiteboard.user.lastname }]}">
            </div>
            <ul>
              <li class="title"><strong>{[{ ::whiteboard.name }]}</strong></li>
              <li class="author">{[{ ::whiteboard.user.firstname }]} {[{ ::whiteboard.user.lastname }]}</li>
              <li class="date"><span>{[{ ::whiteboard.createdAt }]}</span></li>
            </ul>
            <div class="clearfix"></div>
            <div class="submit">
              <a href="whiteboard/{[{ ::whiteboards.project_id }]}/{[{ ::whiteboard.id }]}" title="Open {[{ ::whiteboard.user.firstname }]}'s whiteboard" class="btn {[{ ::path.colors[path.current] + '-color' }]} {[{ ::path.colors[path.current] + '-background-hover' }]}">Open</a>
            </div>
          </div>
        </div>
         <div data-ng-if="!whiteboards.list" class="col-lg-12 col-md-12 col-sm-12 col-xs-12 no-padding">
          <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 no-padding">
            <div class="box error">
              <p><i class="material-icons" aria-hidden="true">help</i>This project doesn't have any whiteboard.<br><span>Create one to begin.</span></p>
            </div>
          </div>
          <div class="clearfix"></div>
        </div>
        <div class="clearfix"></div>
      </div>
    </div>

    <div data-ng-if="!view.valid">
      <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 no-padding">
        <div class="box error">
          <p><i class="material-icons" aria-hidden="true">error</i>Something is wrong with GrappBox.<br><span>Please try again.</span></p>
        </div>
      </div>
      <div class="clearfix"></div>
    </div>
    <div data-ng-if="!view.authorized">
      <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 no-padding">
        <div class="box error">
          <p><i class="material-icons" aria-hidden="true">block</i>You don't have access to this section.<br>Please contact your project manager for more.</p>
        </div>
      </div>
      <div class="clearfix"></div>
    </div>
  </div>
</section>

<!-- Whiteboard creation -->
<script type="text/ng-template" id="whiteboardCreation.html">
  <div class="modal-header">
    <button type="button" class="close gray-hover" aria-hidden="true" data-ng-click="whiteboardCreationCancelled()">Ã—</button>
    <h4 class="modal-title">Whiteboard creation</h4>
  </div>
  <div class="modal-body">
    <form>
      <fieldset>
        <div class="form-group label-floating {[{ whiteboards.new.error ? 'has-error' : '' }]}">
          <label for="name" class="control-label">Name</label>
          <input id="name" type="text" class="form-control" data-ng-model="whiteboards.new.name" required>
        </div>
      </fieldset>
    </form>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn gray-color gray-background-hover white-hover" data-ng-click="whiteboardCreationCancelled()">Cancel</button>
    <button type="button" class="btn {[{ ::path.colors[path.current] + '-color' }]} {[{ ::path.colors[path.current] + '-background-hover' }]} white-hover" data-ng-click="whiteboardCreationConfirmed()">Create</button>
  </div>
</script>