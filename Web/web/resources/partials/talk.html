<!-- This file is subject to the terms and conditions defined in file 'LICENSE.txt',
which is part of the GRAPPBOX source code package.
COPYRIGHT GRAPPBOX. ALL RIGHTS RESERVED. -->

<!-- Talk -->
<section class="talk">
  <div class="page-header {[{ ::path.colors[path.current] + '-background' }]} small">
    <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12 no-padding title">
      <div data-ng-if="!talk.loaded">
        <h1>Loading...</h1>
        <p>Loading...</p>
      </div>
      <div data-ng-if="talk.loaded">
        <h1 class="ellipsis">"{[{ ::talk.data.title }]}"</h1>
        <p>By {[{ ::talk.data.creator.firstname }]} {[{ ::talk.data.creator.lastname }]}, {[{ ::talk.data.createdAt }]}</p>    
      </div>
    </div>
    <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12 no-padding title">
      <a href="" class="btn btn-raised {[{ ::path.colors[path.current] + '-color' }]}" title="Go to the discussion process page">Delete this topic</a>
    </div>
    <div class="clearfix"></div>
  </div>

  <!-- Talk message -->
  <div data-ng-if="!talk.loaded">
    <div class="spinner section">
      <svg class="circular" viewBox="25 25 50 50"><circle class="path" cx="50" cy="50" r="20" fill="none" stroke-width="2" stroke-miterlimit="10"/></circle></svg>
    </div>
  </div>
  <div data-ng-if="talk.loaded">
    <div data-ng-if="talk.valid && talk.authorized">
      <div data-ng-if="talk.data">
        <div class="box-row">
          <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 no-padding talk-message">
            <div class="box">
              <div class="avatar">
                <img src="../resources/img/app/default-avatar.min.png" alt="{[{ ::talk.data.creator.firstname }]}-{[{ ::talk.data.creator.lastname }]}-avatar" width="48px" height="48px">
              </div>
              <ul>
                <li>{[{ ::talk.data.creator.firstname }]} {[{ ::talk.data.creator.lastname }]}</li>
                <li><span>{[{ ::talk.data.createdAt }]}</span></li>
              </ul>
              <div class="clearfix"></div>
              <p class="info"><strong>{[{ ::talk.data.title }]}</strong></p>
              <p class="body">{[{ ::talk.data.message }]}</p>
            </div>
          </div>
        </div>
      </div>
      <div data-ng-if="!talk.data" class="col-lg-12 col-md-12 col-sm-12 col-xs-12 no-padding">
        <div class="box-row">
          <div class="box error text-center">
            <p><i class="material-icons">speaker_notes_off</i>This talk is empty.</p>
          </div>
        </div>
      </div>
    </div>

    <div data-ng-if="!talk.valid && !talk.authorized" class="col-lg-12 col-md-12 col-sm-12 col-xs-12 no-padding">
        <div class="box-row">
        <div class="box error text-center">
          <p><i class="material-icons">block</i>You don't have sufficient rights to see this talk.</p>
        </div>
      </div>
    </div>
    <div data-ng-if="!talk.valid" class="col-lg-12 col-md-12 col-sm-12 col-xs-12 no-padding">
      <div class="box-row">
        <div class="box error text-center">
          <p><i class="material-icons">clear</i>Someting is wrong with GrappBox. Please give us a minute, and try again.</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Comments -->
  <div data-ng-if="comments.loaded">
    <div data-ng-if="comments.valid && comments.authorized">
      <div data-ng-if="comments.data">
        <div class="box-row">
          <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 no-padding each-comment orange-border" data-ng-repeat="comment in comments.data">
            <div class="box">
              <p class="info"><strong>{[{ ::comment.creator.firstname }]} {[{ ::comment.creator.lastname }]}</strong> - <span>{[{ ::comment.createdAt }]}</span></p>
              <p class="body">{[{ ::comment.comment }]}</p>
            </div>
          </div>
        </div>
      </div>
      <div data-ng-if="!comments.data" class="col-lg-12 col-md-12 col-sm-12 col-xs-12 no-padding">
        <div class="box-row">
          <div class="box error text-center">
            <p><i class="material-icons">speaker_notes_off</i>No comments for this talk.</p>
          </div>
        </div>
      </div>
    </div>

    <div data-ng-if="!comments.valid && !comments.authorized" class="col-lg-12 col-md-12 col-sm-12 col-xs-12 no-padding">
        <div class="box-row">
        <div class="box error text-center">
          <p><i class="material-icons">block</i>You don't have sufficient rights to see this talk's comments.</p>
        </div>
      </div>
    </div>
    <div data-ng-if="!comments.valid" class="col-lg-12 col-md-12 col-sm-12 col-xs-12 no-padding">
      <div class="box-row">
        <div class="box error text-center">
          <p><i class="material-icons">clear</i>Someting is wrong with GrappBox. Please give us a minute, and try again.</p>
        </div>
      </div>
    </div>
  </div>

</section>