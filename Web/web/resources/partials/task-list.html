<!-- This file is subject to the terms and conditions defined in file 'LICENSE.txt',
which is part of the GRAPPBOX source code package.
COPYRIGHT GRAPPBOX. ALL RIGHTS RESERVED. -->

<!-- Tasks (list) -->
<div class="page-header construction {[{ path.colors[path.current] + '-stripes' }]}">
  <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 no-padding text-center"><p><i class="material-icons">warning</i>This section is in construction.</p></div>
  <div class="clearfix"></div>
</div>

<section id="tasksList">
  <div class="row">
    <div class="col-lg-12">
      <div class="row" data-ng-if="!data.onLoad && data.message == '_valid'">
        <div class="text-center">
          <a href="{[{'tasks/' + projectId + '/0'}]}" class="btn btn-raised btn-danger" title="Go to the task creation page">Create a new task</a>
        </div>
      </div>
      <div class="well">
        <div data-ng-if="data.onLoad">
          <div class="spinner section">
            <svg class="circular" viewBox="25 25 50 50"><circle class="path" cx="50" cy="50" r="20" fill="none" stroke-width="2" stroke-miterlimit="10"/></circle></svg>
          </div>
        </div>
        <div data-ng-if="!data.onLoad">
          <div data-ng-if="data.message='_valid'">
              <!-- grappbox.data : tasks list -->
              <div id="tab-pannel">
                <ul class="nav nav-tabs" role="tablist">
                  <li id="task-todo" role="taskTodo" class="col-md-2 col-xs-12 active">
                    <a href="" role="tab" data-toggle="tab" data-ng-click="displayTasks('todo')"> To do</a>
                  </li>
                  <li id="task-doing" role="taskDoing" class="col-md-2 col-xs-12">
                    <a href="" role="tab" data-toggle="tab" data-ng-click="displayTasks('doing')"> Doing</a>
                  </li>
                  <li id="task-done" role="taskDone" class="col-md-2 col-xs-12">
                    <a href="" role="tab" data-toggle="tab" data-ng-click="displayTasks('done')"> Done</a>
                  </li>
                  <li id="task-user" role="taskUser" class="col-md-2 col-xs-12">
                    <a href="" role="tab" data-toggle="tab" data-ng-click="displayTasks('user')"> Yours</a>
                  </li>
                  <li id="task-container" role="taskContainer" class="col-md-2 col-xs-12">
                    <a href="" role="tab" data-toggle="tab" data-ng-click="displayTasks('container')"> Containers</a>
                  </li>
                  <li id="task-milestone" role="taskMilestone" class="col-md-2 col-xs-12">
                    <a href="" role="tab" data-toggle="tab" data-ng-click="displayTasks('milestone')"> Milestones</a>
                  </li>
                </ul>

                <div class="tab-content">
                  <div class="tab-pane active" role="tabpanel" id="task-todo-list">
                    <div class="row" data-ng-if="data.todos.length">
                      <table class="table table-hover">
                        <thead>
                          <tr>
                            <th class="col-lg-4"><i class="fa fa-tasks"></i> Title</th>
                            <th class="col-lg-3"><i class="fa fa-tags"></i> Tags</th>
                            <th class="col-lg-3"><i class="fa fa-user"></i> Assigned user(s)</th>
                            <th class="col-lg-2"><i class="fa fa-bell"></i> Due date</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr ng-repeat="task in data.todos" ng-click="openTask(projectId, task.id)" title="Go the task page">
                            <td>{[{ task.title }]}</td>
                            <td>{[{ formatTagsinString(task.tags) }]}</td>
                            <td>{[{ formatUsersinString(task.users) }]}</td>
                            <td>{[{ formatObjectDate(task.due_date) }]}</td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                    <div class="row" data-ng-if="!data.todos.length">
                      <div class="data-wrapper error">
                        <p><i class="fa fa-frown-o"></i>No data to display in this section.</p>
                      </div>
                    </div>
                  </div>
                  <div class="tab-pane" role="tabpanel" id="task-doing-list">
                    <div class="row" data-ng-if="data.doings.length">
                      <table class="table table-hover">
                        <thead>
                          <tr>
                            <th class="col-lg-4"><i class="fa fa-tasks"></i> Title</th>
                            <th class="col-lg-3"><i class="fa fa-tags"></i> Tags</th>
                            <th class="col-lg-3"><i class="fa fa-user"></i> Assigned user(s)</th>
                            <th class="col-lg-2"><i class="fa fa-bell"></i> Due date</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr ng-repeat="task in data.doings" ng-click="openTask(projectId, task.id)" title="Go the task page">
                            <td>{[{ task.title }]}</td>
                            <td>{[{ formatTagsinString(task.tags) }]}</td>
                            <td>{[{ formatUsersinString(task.users) }]}</td>
                            <td>{[{ formatObjectDate(task.due_date) }]}</td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                    <div class="row" data-ng-if="!data.doings.length">
                      <div class="data-wrapper error">
                        <p><i class="fa fa-frown-o"></i>No data to display in this section.</p>
                      </div>
                    </div>
                  </div>
                  <div class="tab-pane" role="tabpanel" id="task-done-list">
                    <div class="row" data-ng-if="data.dones.length">
                      <table class="table table-hover">
                        <thead>
                          <tr>
                            <th class="col-lg-4"><i class="fa fa-tasks"></i> Title</th>
                            <th class="col-lg-3"><i class="fa fa-tags"></i> Tags</th>
                            <th class="col-lg-3"><i class="fa fa-user"></i> Assigned user(s)</th>
                            <th class="col-lg-2"><i class="fa fa-bell"></i> Due date</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr ng-repeat="task in data.dones" ng-click="openTask(projectId, task.id)" title="Go the task page">
                            <td>{[{ task.title }]}</td>
                            <td>{[{ formatTagsinString(task.tags) }]}</td>
                            <td>{[{ formatUsersinString(task.users) }]}</td>
                            <td>{[{ formatObjectDate(task.due_date) }]}</td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                    <div class="row" data-ng-if="!data.dones.length">
                      <div class="data-wrapper error">
                        <p><i class="fa fa-frown-o"></i>No data to display in this section.</p>
                      </div>
                    </div>
                  </div>
                  <div class="tab-pane" role="tabpanel" id="task-user-list">
                    <div class="row" data-ng-if="data.users.length">
                      <table class="table table-hover">
                        <thead>
                          <tr>
                            <th class="col-lg-4"><i class="fa fa-tasks"></i> Title</th>
                            <th class="col-lg-3"><i class="fa fa-tags"></i> Tags</th>
                            <th class="col-lg-3"><i class="fa fa-user"></i> Assigned user(s)</th>
                            <th class="col-lg-2"><i class="fa fa-bell"></i> Due date</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr ng-repeat="task in data.users" ng-click="openTask(projectId, task.id)" title="Go the task page">
                            <td>{[{ task.title }]}</td>
                            <td>{[{ formatTagsinString(task.tags) }]}</td>
                            <td>{[{ formatUsersinString(task.users) }]}</td>
                            <td>{[{ formatObjectDate(task.due_date) }]}</td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                    <div class="row" data-ng-if="!data.users.length">
                      <div class="data-wrapper error">
                        <p><i class="fa fa-frown-o"></i>No data to display in this section.</p>
                      </div>
                    </div>
                  </div>
                  <div class="tab-pane" role="tabpanel" id="task-container-list">
                    <div class="row" data-ng-if="data.containers.length">
                      <table class="table table-hover">
                        <thead>
                          <tr>
                            <th class="col-lg-4"><i class="fa fa-tasks"></i> Title</th>
                            <th class="col-lg-3"><i class="fa fa-tags"></i> Content</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr ng-repeat="task in data.containers" ng-click="openTask(projectId, task.id)" title="Go the task page">
                            <td>{[{ task.title }]}</td>
                            <td>{[{ task.tasks.length }]}</td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                    <div class="row" data-ng-if="!data.containers.length">
                      <div class="data-wrapper error">
                        <p><i class="fa fa-frown-o"></i>No data to display in this section.</p>
                      </div>
                    </div>
                  </div>
                  <div class="tab-pane" role="tabpanel" id="task-milestone-list">
                    <div class="row" data-ng-if="data.milestones.length">
                      <table class="table table-hover">
                        <thead>
                          <tr>
                            <th class="col-lg-4"><i class="fa fa-tasks"></i> Title</th>
                            <th class="col-lg-2"><i class="fa fa-bell"></i> Date</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr ng-repeat="task in data.milestones" ng-click="openTask(projectId, task.id)" title="Go the task page">
                            <td>{[{ task.title }]}</td>
                            <td>{[{ formatObjectDate(task.due_date) }]}</td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                    <div class="row" data-ng-if="!data.milestones.length">
                      <div class="data-wrapper error">
                        <p><i class="fa fa-frown-o"></i>No data to display in this section.</p>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
          </div>
          <div data-ng-if="data.message == '_empty'">
            <div class="row">
              <div class="text-center">
                <a href="{[{'tasks/' + projectId + '/0'}]}" class="btn btn-raised btn-danger" title="Go to the task creation page">Create a new task</a>
              </div>
            </div>
            <div class="row">
              <div class="data-wrapper error">
                <p><i class="fa fa-frown-o"></i>There is no task for this project.</p>
              </div>
            </div>
          </div>
          <div data-ng-if="data.message == '_invalid'">
            <div class="data-wrapper error">
              <p><i class="fa fa-times"></i>An error has occurred. Please try again.</p>
            </div>
          </div>
          <div data-ng-if="data.message == '_denied'">
            <div class="data-wrapper error">
              <p><i class="fa fa-times"></i>You don't have access to the tasks of this project.</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
