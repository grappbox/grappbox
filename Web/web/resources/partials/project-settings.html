<!-- This file is subject to the terms and conditions defined in file 'LICENSE.txt',
which is part of the GRAPPBOX source code package.
COPYRIGHT GRAPPBOX. ALL RIGHTS RESERVED. -->

<!-- Project creation -->
<section class="project-creation" data-ng-if="data.project_new">
  <div class="page-header {[{ ::path.colors[path.current] + '-background' }]}">
    <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12 no-padding text-center">
      <img src="../resources/img/app/settings.svg" width="300" height="auto" alt="Settings">
    </div>
    <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12 no-padding title">
      <h1>Create your project</h1>
      <p>This page allows you to create a brand new project. A name, email and Cloud password are required to proceed.<br>Use the <strong>"Create"</strong> button at the end of this page when you're done.</p>
    </div>
    <div class="clearfix"></div>
  </div>

  <div class="box-row">
    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 no-padding">
      <div class="box">
        <div data-ng-if="data.onLoad">
          <div class="spinner section">
            <svg class="circular" viewBox="25 25 50 50"><circle class="path" cx="50" cy="50" r="20" fill="none" stroke-width="2" stroke-miterlimit="10"></circle></svg>
          </div>
        </div>
        <div data-ng-if="!data.onLoad">
          <form>
            <fieldset>
              <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12">
                <div class="form-group label-floating">
                  <label for="name" class="control-label">Name</label>
                  <input type="text" class="form-control" data-ng-model="data.project.name" id="name" required>
                </div>
                <div class="form-group label-floating">
                  <label for="email" class="control-label">Email</label>
                  <input type="email" class="form-control" data-ng-model="data.project.contact_mail" id="email">
                </div>                
                <div class="form-group label-floating">
                  <label for="company" class="control-label">Company</label>
                  <input type="text" class="form-control" data-ng-model="data.project.company" id="company">
                </div>
                <div class="form-group">
                  <label for="logo" class="control-label">Logo</label>
                  <input type="file" class="form-control" data-ng-model="data.project.logo" id="logo" base-sixty-four-input>
                </div>
                <div class="form-group label-floating">
                  <label for="description" class="control-label">Description</label>
                  <textarea class="form-control" rows="4" data-ng-model="data.project.description" id="description"></textarea>
                </div>
              </div>
              <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12">
                <div class="form-group label-floating">
                  <label for="password" class="control-label">Cloud password</label>
                  <input type="password" class="form-control" data-ng-model="data.project.password" id="password" required>
                </div>
                <div class="form-group label-floating">
                  <label for="passwordConfirm" class="control-label">Cloud password (confirmation)</label>
                  <input type="password" class="form-control" data-ng-model="data.project.confirm_password" id="passwordConfirm" required>
                </div>
                <div class="form-group label-floating">
                  <label for="phone" class="control-label">Phone</label>
                  <input type="phone" class="form-control" data-ng-model="data.project.phone" id="phone">
                </div>
                <div class="form-group label-floating">
                  <label for="facebook" class="control-label">Facebook</label>
                  <input type="text" class="form-control" data-ng-model="data.project.facebook" id="facebook">
                </div>
                <div class="form-group label-floating">
                  <label for="twitter" class="control-label">Twitter</label>
                  <input type="text" class="form-control" data-ng-model="data.project.twitter" id="twitter">
                </div>
              </div>
              <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 no-padding form-group submit">
                <a href="./" class="btn gray-color gray-background-hover">Cancel</a>
                <button type="submit" class="btn {[{ ::path.colors[path.current] + '-color' }]} {[{ ::path.colors[path.current] + '-background-hover' }]}" data-ng-click="createProject(data.project)">Create</button>
              </div>
              <div class="clearfix"></div>
            </fieldset>
          </form>
        </div>
      </div>
    </div>
    <div class="clearfix"></div>
  </div>
</section>

<!-- Project edition -->
<section class="project-edition" data-ng-if="!data.project_new">
  <div class="page-header {[{ ::path.colors[path.current] + '-background' }]}">
    <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12 no-padding text-center">
      <img src="../resources/img/app/settings.svg" width="300" height="auto" alt="Settings">
    </div>
    <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12 no-padding title">
      <h1>Edit your project</h1>
      <p>This page allows you to edit any part of your project.<br>Use the tabs to navigate between all settings, and validate using buttons at the end of pages when you're done.</p>
    </div>
    <div class="clearfix"></div>
  </div>    

  <div class="box-row">
        
    <!-- Project settings tabs -->
    <div class="tab-wrapper">

      <!-- General -->
      <input type="radio" name="tab" id="general" checked>
      <div class="tab-label-content" id="general-content">
        <label for="general" class="{[{ ::path.colors[path.current] + '-color' }]}">
          <i class="material-icons" aria-hidden="true">verified_user</i><span class="hidden-xs">General</span>
        </label>
        <div class="tab-content col-lg-12 col-md-12 col-sm-12 col-xs-12">
          <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 no-padding">
            <div class="box">
              <div data-ng-if="data.onLoad">
                <div class="spinner section">
                  <svg class="circular" viewBox="25 25 50 50"><circle class="path" cx="50" cy="50" r="20" fill="none" stroke-width="2" stroke-miterlimit="10"/></circle></svg>
                </div>
              </div>
              <div data-ng-if="!data.onLoad">
                <div data-ng-if="data.message == '_valid'">
                  <form>
                    <fieldset>
                      <div data-ng-if="data.project.deleted_at">
                        <div class="text-center">
                          <a class="btn btn-raised btn-danger" title="Retrieve This project" data-ng-click="retrieveProject()">Retrieve Project</a>
                        </div>
                      </div>
                      <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12">
                        <div class="form-group label-floating">
                          <label for="name" class="control-label {[{ !data.editMode || data.project.deleted_at ? 'disabled' : '' }]}">Name</label>
                          <input data-ng-model="data.project.name" data-ng-disabled="!data.editMode || data.project.deleted_at" type="text" class="form-control" id="name">
                        </div>
                        <div class="form-group label-floating">
                          <label for="email" class="control-label {[{ !data.editMode || data.project.deleted_at ? 'disabled' : '' }]}">Email</label>
                          <input data-ng-disabled="!data.editMode || data.project.deleted_at" type="email" class="form-control" data-ng-model="data.project.contact_mail" id="email">
                        </div>
                        <div class="form-group label-floating">
                          <label for="company" class="control-label {[{ !data.editMode || data.project.deleted_at ? 'disabled' : '' }]}">Company</label>
                          <input data-ng-disabled="!data.editMode || data.project.deleted_at" type="text" class="form-control" data-ng-model="data.project.company" id="company">
                        </div>
                        <div class="form-group label-floating">
                          <label for="description" class="control-label {[{ !data.editMode || data.project.deleted_at ? 'disabled' : '' }]}">Description</label>
                          <textarea data-ng-disabled="!data.editMode || data.project.deleted_at" class="form-control" rows="4" data-ng-model="data.project.description" id="description"></textarea>
                        </div>
                      </div>
                      <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12">
                        <div class="form-group">
                          <label for="logo" class="control-label {[{ !data.editMode || data.project.deleted_at ? 'disabled' : '' }]}">Logo</label>
                          <input data-ng-disabled="!data.editMode || data.project.deleted_at" type="file" class="form-control" data-ng-model="data.project.logo" id="logo">
                        </div>
                        <div class="form-group label-floating">
                          <label for="phone" class="control-label {[{ !data.editMode || data.project.deleted_at ? 'disabled' : '' }]}">Phone</label>
                          <input data-ng-disabled="!data.editMode || data.project.deleted_at" type="phone" class="form-control" data-ng-model="data.project.phone" id="phone">
                        </div>
                        <div class="form-group label-floating">
                          <label for="facebook" class="control-label {[{ !data.editMode || data.project.deleted_at ? 'disabled' : '' }]}">Facebook</label>
                          <input data-ng-disabled="!data.editMode || data.project.deleted_at" type="text" class="form-control" data-ng-model="data.project.facebook" id="facebook">
                        </div>
                        <div class="form-group label-floating">
                          <label for="twitter" class="control-label {[{ !data.editMode || data.project.deleted_at ? 'disabled' : '' }]}">Twitter</label>
                          <input data-ng-disabled="!data.editMode || data.project.deleted_at" type="text" class="form-control" data-ng-model="data.project.twitter" id="twitter">
                        </div>
                      </div>
                      <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 no-padding form-group submit">
                        <button class="btn {[{ ::path.colors[path.current] + '-color' }]} {[{ ::path.colors[path.current] + '-background-hover' }]}" data-ng-if="!data.editMode && data.userRights >= 2 && !data.project.deleted_at" data-ng-click="project_switchEditMode()">Edit</button>
                        <button class="btn gray-color gray-background-hover white-hover" data-ng-if="data.editMode && data.userRights >= 2 && !data.project.deleted_at" data-ng-click="project_switchEditMode()">Cancel</button>
                        <button class="btn {[{ ::path.colors[path.current] + '-color' }]} {[{ ::path.colors[path.current] + '-background-hover' }]}" data-ng-if="data.editMode && data.userRights >= 2 && !data.project.deleted_at" data-ng-click="updateProject(data.project)">Update</button>
                      </div>
                      <div class="clearfix"></div>
                    </fieldset>
                  </form>
                </div>

                <div data-ng-if="data.message == '_empty'">
                  <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 no-padding">
                    <div class="box error">
                      <p><i class="material-icons" aria-hidden="true">error</i>This project doesn't exist.</p>
                    </div>
                  </div>
                  <div class="clearfix"></div>
                </div>
                <div data-ng-if="data.message == '_invalid'">
                  <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 no-padding">
                    <div class="box error">
                      <p><i class="material-icons" aria-hidden="true">error</i>Something is wrong with GrappBox.<br><span>Please try again.</span></p>
                    </div>
                  </div>
                  <div class="clearfix"></div>
                </div>
                <div data-ng-if="data.message == '_denied'">
                  <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 no-padding">
                    <div class="box error">
                      <p><i class="material-icons" aria-hidden="true">block</i>You don't have access to this section.<br>Please contact your project manager for more.</p>
                    </div>
                  </div>
                  <div class="clearfix"></div>
                </div>
              </div>
            </div>
          </div>
          <div class="clearfix"></div>
        </div>
        <div class="clearfix"></div>
      </div>

      <!-- Users -->
      <input type="radio" name="tab" id="users">
      <div class="tab-label-content" id="users-content">
        <label for="users" class="{[{ ::path.colors[path.current] + '-color' }]}"><i class="material-icons" aria-hidden="true">group</i><span class="hidden-xs">Users</span></label>
        <div class="tab-content col-lg-12 col-md-12 col-sm-12 col-xs-12">

          <h4 class="col-lg-12 col-md-12 col-sm-12 col-xs-12 box-header" data-ng-if="data.userRights >= 2">
            <i class="material-icons rounded {[{ ::path.colors[path.current] + '-background' }]}">person_add</i>Add an user</h4>
          <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 no-padding" data-ng-if="data.userRights >= 2">
            <div class="box">
              <div data-ng-if="data.onLoad || data.usersLoad">
                <div class="spinner section">
                  <svg class="circular" viewBox="25 25 50 50"><circle class="path" cx="50" cy="50" r="20" fill="none" stroke-width="2" stroke-miterlimit="10"/></circle></svg>
                </div>
              </div>
              <div data-ng-if="!data.onLoad && !data.usersLoad">
                <div data-ng-if="data.users_message == '_valid'">
                  <div data-ng-if="data.userRights && !data.project.deleted_at">
                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                      <form>
                        <fieldset>
                          <div class="form-group label-floating">
                            <label for="newUser" class="control-label">Email</label>
                            <input type="email" class="form-control" data-ng-model="new_user" id="newUser" required>
                          </div>
                          <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 no-padding form-group submit">
                            <button type="submit" class="btn {[{ ::path.colors[path.current] + '-color' }]} {[{ ::path.colors[path.current] + '-background-hover' }]}" data-ng-click="addUser(new_user)">Add</button>
                          </div>
                        </fieldset>
                      </form>
                    </div>
                    <div class="clearfix"></div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <h4 class="col-lg-12 col-md-12 col-sm-12 col-xs-12 box-header"><i class="material-icons rounded {[{ ::path.colors[path.current] + '-background' }]}">group</i>Registered users</h4>
          <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 no-padding" data-ng-if="data.userRights >= 2">
            <div class="box {[{ !data.onLoad && !data.usersLoad ? 'no-padding' : '' }]}">
              <div data-ng-if="data.onLoad || data.usersLoad">
                <div class="spinner section">
                  <svg class="circular" viewBox="25 25 50 50"><circle class="path" cx="50" cy="50" r="20" fill="none" stroke-width="2" stroke-miterlimit="10"/></circle></svg>
                </div>
              </div>
              <div data-ng-if="!data.onLoad && !data.usersLoad">
                <div class="data.users_message == 'valid">
                  <div class="table-responsive text-center">
                    <table class="table table-striped table-hover table-bordered">
                      <thead>
                        <tr>
                          <th class="col-lg-2 col-md-2 col-sm-2 col-xs-2">Name</th>
                          <th class="col-lg-8 col-md-8 col-sm-8 col-xs-8">Role</th>
                          <th class="col-lg-2 col-md-2 col-sm-2 col-xs-2" data-ng-if="data.userRights >= 2">Deletion</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr data-ng-repeat="user in data.users">
                          <td>{[{ user.firstname + " " + user.lastname }]}</td>
                          <td>
                            <div class="col-lg-9 col-md-9 col-sm-12 col-xs-12">
                              <form>
                                <fieldset>
                                  <div class="form-group no-margin">
                                    <select class="form-control" data-ng-disabled="data.userRights < 2" data-ng-model="user.role" data-ng-options="role.roleId as role.name for role in data.roles"></select>
                                  </div>
                                </fieldset>
                              </form>
                            </div>
                            <div class="col-lg-3 col-md-3 col-sm-12 col-xs-12">
                              <a href="" class="btn blue-color blue-background-hover white-hover" data-ng-if="data.userRights >= 2" data-ng-click="assignRoleToUser(user)">Update</a>
                            </div>
                          </td>
                          <td data-ng-if="data.userRights >= 2">
                            <button class="btn {[{ ::path.colors[path.current] + '-color' }]} {[{ ::path.colors[path.current] + '-background-hover' }]}" data-ng-click="removeUser(user)">Delete</button>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>

                <div data-ng-if="data.users_message == '_empty'">
                  <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 no-padding">
                    <div class="box error">
                      <p><i class="material-icons" aria-hidden="true">help</i>You don't have any registered team member.<br><span>Use the section above to add one.</span></p>
                    </div>
                  </div>
                  <div class="clearfix"></div>
                </div>
                <div data-ng-if="data.users_message == '_invalid'">
                  <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 no-padding">
                    <div class="box error">
                      <p><i class="material-icons" aria-hidden="true">error</i>Something is wrong with GrappBox.<br><span>Please try again.</span></p>
                    </div>
                  </div>
                  <div class="clearfix"></div>
                </div>
                <div data-ng-if="data.users_message == '_denied'">
                  <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 no-padding">
                    <div class="box error">
                      <p><i class="material-icons" aria-hidden="true">block</i>You don't have access to this section.<br>Please contact your project manager for more.</p>
                    </div>
                  </div>
                  <div class="clearfix"></div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="clearfix"></div>
      </div>

      <!-- Roles -->
      <input type="radio" name="tab" id="roles">
      <div class="tab-label-content" id="roles-content">
        <label for="roles" class="{[{ ::path.colors[path.current] + '-color' }]}"><i class="material-icons" aria-hidden="true">lock</i><span class="hidden-xs">Roles</span></label>
        <div class="tab-content col-lg-12 col-md-12 col-sm-12 col-xs-12">

          <h4 class="col-lg-12 col-md-12 col-sm-12 col-xs-12 box-header" data-ng-if="data.userRights >= 2">
            <i class="material-icons rounded {[{ ::path.colors[path.current] + '-background' }]}">enhanced_encryption</i>Create a new role</h4>
          <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 no-padding" data-ng-if="data.userRights >= 2">
            <div class="box">
              <div data-ng-if="data.onLoad || data.rolesLoad">
                <div class="spinner section">
                  <svg class="circular" viewBox="25 25 50 50"><circle class="path" cx="50" cy="50" r="20" fill="none" stroke-width="2" stroke-miterlimit="10"/></circle></svg>
                </div>
              </div>
              <div data-ng-if="!data.onLoad && !data.rolesLoad">
                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                  <form>
                    <fieldset>
                      <div class="form-group label-floating">
                        <label for="newRole" class="control-label">Role name</label>
                        <input class="form-control" type="text" data-ng-model="new_role.name" id="newRole">
                      </div>
                      <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 no-padding">
                        <div class="table-responsive">
                          <table class="table table-striped table-hover table-bordered"">
                            <tbody>
                              <tr>
                                <td class="col-lg-4 col-md-4 col-sm-4 col-xs-4">
                                  <form>
                                    <fieldset>
                                      <div class="form-group no-margin">
                                        <label for="team-timeline" class="control-label">Team timeline</label>
                                        <select name="team-timeline" class="form-control" data-ng-model="new_role.team_timeline" data-ng-options="convertToInt(right.id) as right.name for right in rightsOptions"></select>
                                      </div>
                                    </fieldset>
                                  </form>
                                </td>
                                <td class="col-lg-4 col-md-4 col-sm-4 col-xs-4">
                                  <form>
                                    <fieldset>
                                      <div class="form-group no-margin">
                                        <label for="customer-timeline" class="control-label">Customer timeline</label>
                                        <select name="customer-timeline" class="form-control" data-ng-model="new_role.customer_timeline" data-ng-options="convertToInt(right.id) as right.name for right in rightsOptions"></select>
                                      </div>
                                    </fieldset>
                                  </form>
                                </td>
                                <td class="col-lg-4 col-md-4 col-sm-4 col-xs-4">
                                  <form>
                                    <fieldset>
                                      <div class="form-group no-margin">
                                        <label for="gantt" class="control-label">Gantt</label>
                                        <select name="gantt" class="form-control" data-ng-model="new_role.gantt" data-ng-options="convertToInt(right.id) as right.name for right in rightsOptions"></select>
                                      </div>
                                    </fieldset>
                                  </form>
                                </td>
                              </tr>
                              <tr>
                                <td class="col-lg-4 col-md-4 col-sm-4 col-xs-4">
                                  <form>
                                    <fieldset>
                                      <div class="form-group no-margin">
                                        <label for="whiteboard" class="control-label">Whiteboard</label>
                                        <select name="whiteboard" class="form-control" data-ng-model="new_role.whiteboard" data-ng-options="convertToInt(right.id) as right.name for right in rightsOptions"></select>
                                      </div>
                                    </fieldset>
                                  </form>
                                </td>
                                <td class="col-lg-4 col-md-4 col-sm-4 col-xs-4">
                                  <form>
                                    <fieldset>
                                      <div class="form-group no-margin">
                                        <label for="bugtracker" class="control-label">Bugtracker</label>
                                        <select name="bugtracker" class="form-control" data-ng-model="new_role.bugtracker" data-ng-options="convertToInt(right.id) as right.name for right in rightsOptions"></select>
                                      </div>
                                    </fieldset>
                                  </form>
                                </td>
                                <td class="col-lg-4 col-md-4 col-sm-4 col-xs-4">
                                  <form>
                                    <fieldset>
                                      <div class="form-group no-margin">
                                        <label for="event" class="control-label">Event</label>
                                        <select name="event" class="form-control" data-ng-model="new_role.event" data-ng-options="convertToInt(right.id) as right.name for right in rightsOptions"></select>
                                      </div>
                                    </fieldset>
                                  </form>
                                </td>
                              </tr>
                              <tr>
                                <td class="col-lg-4 col-md-4 col-sm-4 col-xs-4">
                                  <form>
                                    <fieldset>
                                      <div class="form-group no-margin">
                                        <label for="task" class="control-label">Task</label>
                                        <select name="task" class="form-control" data-ng-model="new_role.task" data-ng-options="convertToInt(right.id) as right.name for right in rightsOptions"></select>
                                      </div>
                                    </fieldset>
                                  </form>
                                </td>
                                <td class="col-lg-4 col-md-4 col-sm-4 col-xs-4">
                                  <form>
                                    <fieldset>
                                      <div class="form-group no-margin">
                                        <label for="project-settings" class="control-label">Project settings</label>
                                        <select name="project-settings" class="form-control" data-ng-model="new_role.project_settings" data-ng-options="convertToInt(right.id) as right.name for right in rightsOptions"></select>
                                      </div>
                                    </fieldset>
                                  </form>
                                </td>
                                <td class="col-lg-4 col-md-4 col-sm-4 col-xs-4">
                                  <form>
                                    <fieldset>
                                      <div class="form-group no-margin">
                                        <label for="cloud" class="control-label">Cloud</label>
                                        <select name="cloud" class="form-control" data-ng-model="new_role.cloud" data-ng-options="convertToInt(right.id) as right.name for right in rightsOptions"></select>
                                      </div>
                                    </fieldset>
                                  </form>
                                </td>
                              </tr>
                            </tbody>
                          </table>
                        </div>
                      </div>
                      <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 no-padding form-group submit">
                        <button type="submit" class="btn {[{ ::path.colors[path.current] + '-color' }]} {[{ ::path.colors[path.current] + '-background-hover' }]}" data-ng-click="createRole(new_role)">Create</button>
                      </div>
                      <div class="clearfix"></div>
                    </fieldset>
                  </form>
                </div>
                <div class="clearfix"></div>
              </div>
            </div>
          </div>

          <h4 class="col-lg-12 col-md-12 col-sm-12 col-xs-12 box-header">
            <i class="material-icons rounded {[{ ::path.colors[path.current] + '-background' }]}">lock</i>Registered roles</h4>
          <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 no-padding">
            <div class="box {[{ !data.onLoad && !data.rolesLoad ? 'no-padding' : '' }]}">
              <div data-ng-if="data.roles_message == '_valid'">
                <div class="panel panel-default" data-ng-repeat="role in data.roles">
                  <div class="panel-heading {[{ ::path.colors[path.current] + '-background' }]} white-color">{[{ role.name }]}</div>
                  <div class="panel-body">
                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                      <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4">
                        <form>
                          <fieldset>
                            <div class="form-group no-margin">
                              <label for="team-timeline" class="control-label">Team timeline</label>
                              <select name="team-timeline" class="form-control" data-ng-disabled="data.userRights < 2" data-ng-model="role.teamTimeline" data-ng-options="convertToInt(right.id) as right.name for right in rightsOptions"></select>
                            </div>
                          </fieldset>
                        </form>
                      </div>
                      <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4">
                        <form>
                          <fieldset>
                            <div class="form-group no-margin">
                              <label for="customer-timeline" class="control-label">Customer timeline</label>
                              <select name="customer-timeline" class="form-control" data-ng-disabled="data.userRights < 2" data-ng-model="role.customerTimeline" data-ng-options="convertToInt(right.id) as right.name for right in rightsOptions"></select>
                            </div>
                          </fieldset>
                        </form>
                      </div>
                      <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4">
                        <form>
                          <fieldset>
                            <div class="form-group no-margin">
                              <label for="gantt" class="control-label">Gantt</label>
                              <select name="gantt" class="form-control" data-ng-disabled="data.userRights < 2" data-ng-model="role.gantt" data-ng-options="convertToInt(right.id) as right.name for right in rightsOptions"></select>
                            </div>
                          </fieldset>
                        </form>
                      </div>
                      <div class="clearfix"></div>
                    </div>
                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                      <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4">
                        <form>
                          <fieldset>
                            <div class="form-group no-margin">
                              <label for="whiteboard" class="control-label">Whiteboard</label>
                              <select name="whiteboard" class="form-control" data-ng-disabled="data.userRights < 2" data-ng-model="role.whiteboard" data-ng-options="convertToInt(right.id) as right.name for right in rightsOptions"></select>
                            </div>
                          </fieldset>
                        </form>
                      </div>
                      <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4">
                        <form>
                          <fieldset>
                            <div class="form-group no-margin">
                              <label for="bugtracker" class="control-label">Bugtracker</label>
                              <select name="bugtracker" class="form-control" data-ng-disabled="data.userRights < 2" data-ng-model="role.bugtracker" data-ng-options="convertToInt(right.id) as right.name for right in rightsOptions"></select>
                            </div>
                          </fieldset>
                        </form>
                      </div>
                      <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4">
                        <form>
                          <fieldset>
                            <div class="form-group no-margin">
                              <label for="event" class="control-label">Event</label>
                              <select name="event" class="form-control" data-ng-disabled="data.userRights < 2" data-ng-model="role.event" data-ng-options="convertToInt(right.id) as right.name for right in rightsOptions"></select>
                            </div>
                          </fieldset>
                        </form>
                      </div>
                      <div class="clearfix"></div>
                    </div>
                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                      <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4">
                        <form>
                          <fieldset>
                            <div class="form-group no-margin">
                              <label for="task" class="control-label">Task</label>
                              <select name="task" class="form-control" data-ng-disabled="data.userRights < 2" data-ng-model="role.task" data-ng-options="convertToInt(right.id) as right.name for right in rightsOptions"></select>
                            </div>
                          </fieldset>
                        </form>
                      </div>
                      <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4">
                        <form>
                          <fieldset>
                            <div class="form-group no-margin">
                              <label for="project-settings" class="control-label">Project settings</label>
                              <select name="project-settings" class="form-control" data-ng-disabled="data.userRights < 2" data-ng-model="role.projectSettings" data-ng-options="convertToInt(right.id) as right.name for right in rightsOptions"></select>
                            </div>
                          </fieldset>
                        </form>
                      </div>
                      <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4">
                        <form>
                          <fieldset>
                            <div class="form-group no-margin">
                              <label for="cloud" class="control-label">Cloud</label>
                              <select name="cloud" class="form-control" data-ng-disabled="data.userRights < 2" data-ng-model="role.cloud" data-ng-options="convertToInt(right.id) as right.name for right in rightsOptions"></select>
                            </div>
                          </fieldset>
                        </form>
                      </div>
                      <div class="clearfix"></div>
                    </div>
                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 no-padding form-group submit" data-ng-if="data.userRights >= 2">
                      <button type="submit" class="btn gray-color gray-background-hover white-hover" data-ng-click="deleteRole(role)">Delete</button>
                      <button type="submit" class="btn {[{ ::path.colors[path.current] + '-color' }]} {[{ ::path.colors[path.current] + '-background-hover' }]}" data-ng-click="editRole(role)">Update</button>
                    </div>
                    <div class="clearfix"></div>
                  </div>
                </div>
              </div>
              <div data-ng-if="data.roles_message == '_empty'">
                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 no-padding">
                  <div class="box error">
                    <p><i class="material-icons" aria-hidden="true">help</i>This project doesn't have any role.<br><span>Consider adding one using the section above.</span></p>
                  </div>
                </div>
                <div class="clearfix"></div>
              </div>
              <div data-ng-if="data.roles_message == '_invalid'">
                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 no-padding">
                  <div class="box error">
                    <p><i class="material-icons" aria-hidden="true">error</i>Something is wrong with GrappBox.<br><span>Please try again.</span></p>
                  </div>
                </div>
                <div class="clearfix"></div>
              </div>
              <div data-ng-if="data.roles_message == '_denied'">
                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 no-padding">
                  <div class="box error">
                    <p><i class="material-icons" aria-hidden="true">block</i>You don't have access to this section.<br>Please contact your project manager for more.</p>
                  </div>
                </div>
                <div class="clearfix"></div>
              </div>              
            </div>
          </div>
          <div class="clearfix"></div>
        </div>
        <div class="clearfix"></div>
      </div>

      <!-- Customers -->
      <input type="radio" name="tab" id="customers">
      <div class="tab-label-content" id="customers-content">
        <label for="customers" class="{[{ ::path.colors[path.current] + '-color' }]}"><i class="material-icons" aria-hidden="true">public</i><span class="hidden-xs">Customers</span></label>
        <div class="tab-content col-lg-12 col-md-12 col-sm-12 col-xs-12">

          <h4 class="col-lg-12 col-md-12 col-sm-12 col-xs-12 box-header" data-ng-if="data.userRights >= 2">
            <i class="material-icons rounded {[{ ::path.colors[path.current] + '-background' }]}">vpn_lock</i>Add a new customer</h4>
          <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 no-padding" data-ng-if="data.userRights >= 2">
            <div class="box">
              <div data-ng-if="data.onLoad || data.customersLoad">
                <div class="spinner section">
                  <svg class="circular" viewBox="25 25 50 50"><circle class="path" cx="50" cy="50" r="20" fill="none" stroke-width="2" stroke-miterlimit="10"/></circle></svg>
                </div>
              </div>
              <div data-ng-if="!data.onLoad && !data.customersLoad">
                <div data-ng-if="data.customers_message == '_valid' || data.customers_message == '_empty'">
                  <div data-ng-if="data.userRights && !data.project.deleted_at">
                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                      <form>
                        <fieldset>
                          <div class="form-group label-floating">
                            <label for="newCustomer" class="control-label">Customer name</label>
                            <input class="form-control" type="text" data-ng-model="new_customer.name" id="newCustomer">
                          </div>
                          <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 no-padding form-group submit">
                            <button type="submit" class="btn {[{ ::path.colors[path.current] + '-color' }]} {[{ ::path.colors[path.current] + '-background-hover' }]}" data-ng-click="createCustomersAccess(new_customer)">Add</button>
                          </div>
                        </fieldset>
                      </form>
                    </div>
                  </div>
                  <div class="clearfix"></div>
                </div>
              </div>
            </div>
          </div>

          <h4 class="col-lg-12 col-md-12 col-sm-12 col-xs-12 box-header">
            <i class="material-icons rounded {[{ ::path.colors[path.current] + '-background' }]}">public</i>Registered customer accesses</h4>
          <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 no-padding">
            <div class="box {[{ !data.onLoad && !data.customersLoad ? 'no-padding' : '' }]}">
              <div data-ng-if="data.onLoad || data.customersLoad">
                <div class="spinner section">
                  <svg class="circular" viewBox="25 25 50 50"><circle class="path" cx="50" cy="50" r="20" fill="none" stroke-width="2" stroke-miterlimit="10"/></circle></svg>
                </div>
              </div>
              <div data-ng-if="!data.onLoad && !data.customersLoad">
                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 no-padding" data-ng-if="data.customers_message == '_valid'">
                  <div class="table-responsive text-center">
                    <table class="table table-striped table-hover table-bordered">
                      <thead>
                        <tr>
                          <th class="col-lg-2 col-md-2 col-sm-2 col-xs-2">Name</th>
                          <th class="col-lg-8 col-md-8 col-sm-8 col-xs-8">Token</th>
                          <th class="col-lg-2 col-md-2 col-sm-2 col-xs-2" data-ng-if="data.userRights >= 2">Deletion</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr data-ng-repeat="customer in data.customers">
                          <td>{[{ customer.name }]}</td>
                          <td>{[{ customer.customer_token }]}</td>
                          <td data-ng-if="data.userRights >= 2">
                            <button class="btn {[{ ::path.colors[path.current] + '-color' }]} {[{ ::path.colors[path.current] + '-background-hover' }]}" data-ng-click="deleteCustomerAccess(customer)">Delete</button>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
                <div class="clearfix"></div>
              </div>
            </div>
          </div>

          <div data-ng-if="data.customers_message == '_empty'">
            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 no-padding">
              <div class="box error">
                <p><i class="material-icons" aria-hidden="true">help</i>Your project doesn't have any registered customer.<br><span>Use the section above to add one.</span></p>
              </div>
            </div>
            <div class="clearfix"></div>
          </div>
          <div data-ng-if="data.customers_message == '_invalid'">
            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 no-padding">
              <div class="box error">
                <p><i class="material-icons" aria-hidden="true">error</i>Something is wrong with GrappBox.<br><span>Please try again.</span></p>
              </div>
            </div>
            <div class="clearfix"></div>
          </div>
          <div data-ng-if="data.customers_message == '_denied'">
            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 no-padding">
              <div class="box error">
                <p><i class="material-icons" aria-hidden="true">block</i>You don't have access to this section.<br>Please contact your project manager for more.</p>
              </div>
            </div>
            <div class="clearfix"></div>
          </div>
          <div class="clearfix"></div>
        </div>
        <div class="clearfix"></div>
      </div>

      <!-- Danger zone -->
      <input type="radio" name="tab" id="danger">
      <div class="tab-label-content" id="danger-content">
        <label for="danger" class="{[{ ::path.colors[path.current] + '-color' }]}"><i class="material-icons" aria-hidden="true">warning</i><span class="hidden-xs">Danger zone</span></label>
        <div class="tab-content col-lg-12 col-md-12 col-sm-12 col-xs-12">

          <h4 class="col-lg-12 col-md-12 col-sm-12 col-xs-12 box-header">
            <i class="material-icons rounded {[{ ::path.colors['/cloud'] + '-background' }]}">{[{ ::path.icons['/cloud'] }]}</i>Cloud password</h4>
          <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 no-padding">
            <div class="box">
              <div data-ng-if="data.onLoad">
                <div class="spinner section">
                  <svg class="circular" viewBox="25 25 50 50"><circle class="path" cx="50" cy="50" r="20" fill="none" stroke-width="2" stroke-miterlimit="10"/></circle></svg>
                </div>
              </div>
              <div data-ng-if="!data.onLoad">
                <div data-ng-if="data.message == '_valid'">
                  <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                    <form>
                      <fieldset>
                        <div class="form-group label-floating">
                          <label for="oldPassword" class="control-label">Actual password</label>
                          <input type="password" class="form-control" data-ng-model="data.project.old_password" id="oldPassword" required>
                        </div>
                        <div class="form-group label-floating">
                          <label for="password" class="control-label">New password</label>
                          <input type="password" class="form-control" data-ng-model="data.project.password" id="password" required>
                        </div>
                        <div class="form-group label-floating">
                          <label for="passwordConfirm" class="control-label">Confirmation</label>
                          <input type="password" class="form-control" data-ng-model="data.project.confirm_password" id="passwordConfirm" required>
                        </div>
                        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 no-padding form-group submit">
                          <button type="submit" class="btn {[{ ::path.colors['/cloud'] + '-color' }]} {[{ ::path.colors['/cloud'] + '-background-hover' }]}" data-ng-click="updatePassword(data.project)">Update</button>
                        </div>
                      </fieldset>
                    </form>
                  </div>
                  <div class="clearfix"></div>
                </div>
                <div data-ng-if="data.message == '_invalid' || data.message == '_empty' || data.project_error">
                  <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 no-padding">
                    <div class="box error">
                      <p><i class="material-icons" aria-hidden="true">error</i>Something is wrong with GrappBox.<br><span>Please try again.</span></p>
                    </div>
                  </div>
                </div>
                <div data-ng-if="data.message == '_denied'">
                  <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 no-padding">
                    <div class="box error">
                      <p><i class="material-icons" aria-hidden="true">block</i>You don't have access to this section.<br>Please contact your project manager for more.</p>
                    </div>
                  </div>
                </div>                
              </div>
            </div>
          </div>

          <h4 class="col-lg-12 col-md-12 col-sm-12 col-xs-12 box-header">
            <i class="material-icons rounded {[{ ::path.colors[path.current] + '-background' }]}">warning</i>Project deletion</h4>
          <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 no-padding">
            <div class="box">
              <div data-ng-if="data.onLoad">
                <div class="spinner section">
                  <svg class="circular" viewBox="25 25 50 50"><circle class="path" cx="50" cy="50" r="20" fill="none" stroke-width="2" stroke-miterlimit="10"/></circle></svg>
                </div>
              </div>
              <div data-ng-if="!data.onLoad">
                <div data-ng-if="data.message == '_valid'">
                  <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                    <p>Use the following button to delete your project.<br><b>Remember, any information related to this project will be deleted.</b></p>
                    <button type="submit" class="btn btn-raised {[{ ::path.colors[path.current] + '-color-hover' }]} {[{ ::path.colors[path.current] + '-background' }]} white-hover" data-ng-click="action.onDeleteProject()">Delete project</button>
                  </div>
                  <div class="clearfix"></div>
                </div>
                <div data-ng-if="data.message == '_invalid' || data.message == '_empty' || data.project_error">
                  <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 no-padding">
                    <div class="box error">
                      <p><i class="material-icons" aria-hidden="true">error</i>Something is wrong with GrappBox.<br><span>Please try again.</span></p>
                    </div>
                  </div>
                  <div class="clearfix"></div>
                </div>
                <div data-ng-if="data.message == '_denied'">
                  <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 no-padding">
                    <div class="box error">
                      <p><i class="material-icons" aria-hidden="true">block</i>You don't have access to this section.<br>Please contact your project manager for more.</p>
                    </div>
                  </div>
                  <div class="clearfix"></div>
                </div>                
              </div>
            </div>
            <div class="clearfix"></div>
          </div>
          <div class="clearfix"></div>
        </div>
        <div class="clearfix"></div>
      </div>

      <div class="slide {[{ ::path.colors[path.current] + '-background' }]}"></div>
    </div>
  </div>
</section>

<!-- project-settings: project deletion modal -->
<script type="text/ng-template" id="modal_deleteProject.html">
  <div class="modal-header">
    <button type="button" class="close gray-hover" aria-hidden="true" data-ng-click="modal_cancelProjectDeletion()">×</button>
    <h4 class="modal-title">Project deletion</h4>
  </div>
  <div class="modal-body">
    <p>Are you sure you want to permanently delete this project?<br>If confirmed, you have only <strong>7 days</strong> to cancel the process. After these <strong>7 days</strong>, any related data is definitively lost.</p>
    <p>Do you want to continue?</p>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn gray-color gray-background-hover white-hover" data-ng-click="modal_cancelProjectDeletion()">Cancel</button>
    <button type="button" class="btn {[{ ::path.colors[path.current] + '-color' }]} {[{ ::path.colors[path.current] + '-background-hover' }]} white-hover" data-ng-click="modal_confirmProjectDeletion()">Delete</button>
  </div>
</script>