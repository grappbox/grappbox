language: php
php:
  - 5.6
sudo: required
services:
  - mysql
before_script:
  - echo "extension = mongo.so" >> ~/.phpenv/versions/$(phpenv version-name)/etc/php.ini
  - cd API
  - php composer.phar self-update
  - php composer.phar -n --no-ansi install --prefer-source
script:
  - php app/console doctrine:database:create
  - php app/console doctrine:generate:entities SQLBundle
  - php app/console doctrine:schema:update --force