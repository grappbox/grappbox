language: php
php:
  - 5.6
sudo: required
services:
  - mysql
before_script:
  - echo "extension = mongo.so" >> ~/.phpenv/versions/$(phpenv version-name)/etc/php.ini
  - echo "extension = mongodb.so" >> ~/.phpenv/versions/$(phpenv version-name)/etc/php.ini
  - cd API
  - cp app/config/parameters.yml.travis app/config/parameters.yml
  - php composer.phar self-update
  - php composer.phar install
  - php app/console doctrine:generate:entities SQLBundle
  - php app/console doctrine:database:create --env=test
  - php app/console doctrine:schema:create --force --env=test
  - php app/console doctrine:fixtures:load -n --env=test
script:
  - phpunit -c app