<!--
Summary: Edit event on calendar view
-->

<ion-view>
  <ion-nav-title class="item-text-wrap">Edit event</ion-nav-title>
  <!-- Have to set scroll="false" because there is a bug with ionic: can't set multiple select otherwise (impossible to click from the browser) -->
  <ion-content overflow-scroll="false" scroll="false">

    <!-- Set event's title -->
    <form name="editEvent_form">
      <ion-input class="item item-input item-floating-label">
        <ion-label>Title</ion-label>
        <input type="text"
        placeholder="Title"
        name="editEvent_title"
        ng-model="event.title" required />
      </ion-input>

      <!-- Set event's description -->
      <ion-label class="textarea_left">Description</ion-label>
      <textarea name="editEvent_description"
      rows="6"
      placeholder="Place..."
      ng-model="event.description" required></textarea>

      <!-- Set event's begin and end date -->
      <label class="item item-input">
        <span class="input-label">Begin</span>
        <input type="datetime-local" name="editEvent_startTime" ng-model="event.beginDate" required></input>
      </label>
      <label class="item item-input">
        <span class="input-label">End</span>
        <input type="datetime-local" name="editEvent_endTime" ng-model="event.endDate" required></input>
      </label>

      <!-- Set event's participants -->
      <label ng-if="projectId" class="item item-input">
        <span class="input-label">Participants</span>
        <select ng-model="selectedUsers" ng-change="updateUserList(selectedUsers)" name="editEvent_selectedUsers" multiple>
          <option ng-repeat="user in userList" value="{{user.id}}">{{user.firstname}} {{user.lastname}}</option>
        </select>
      </label>
    </form>
    <!-- EDIT button -->
    <div class="text-center">
      <button ng-disabled="editEvent_form.$invalid" class="button button-clear gb-color-calendar" ng-click="EditEvent()">EDIT</button>
    </div>

    <!-- Danger zone DELETE button -->
    <div class="item item-divider bar bar-assertive">Danger zone</div>
    <a class="button button-block button-dark icon ion-ios-trash" ng-click="PopupDeleteEvent()"></a>
  </ion-content>
</ion-view>
